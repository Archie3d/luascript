#!/usr/bin/env python

Import('env')
Import('env_modules')

env_luascript = env_modules.Clone()

lua_home = ARGUMENTS.get('lua_home')

lua_include_path = ''
lua_lib_path = ''
lua_lib_name = ''

if lua_home:
    lua_include_path = lua_home + '/src'
    lua_lib_path = lua_home + '/src'
    lua_lib_name = 'lua'
else:
    print('Lua implementation not found; cannot build "luascript" module...')
    print('Use command line option "lua_home=<Lua distribution folder goes here>"')
    Exit(1)

env_luascript.add_source_files(env.modules_sources,'*.cpp')
env_luascript.Append(CXXFLAGS=['-O2', '-std=c++14'])
env_luascript.Append(CPPPATH=lua_include_path)
env.Append(LIBPATH=lua_lib_path)
env.Append(LIBS=[lua_lib_name])

if env['tools']:
	env_luascript.add_source_files(env.modules_sources, "./editor/*.cpp")

Export('env')
